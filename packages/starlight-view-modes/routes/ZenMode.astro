---
import { getCollection, render } from 'astro:content';
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';

export async function getStaticPaths() {
	const allDocs = await getCollection('docs');
	return allDocs.map((doc: { id: string; }) => ({
		params: { path: doc.id },
		props: { doc },
	}));
}

export const prerender = true

const { doc } = Astro.props;
const { Content, headings, remarkPluginFrontmatter } = await render(doc);

const { hasSidebar } = remarkPluginFrontmatter
---

<StarlightPage frontmatter={ remarkPluginFrontmatter } {headings} {hasSidebar}>
	<Content />
</StarlightPage>

<style is:global>
	body {
		--sl-mobile-toc-height: 0rem;
	}
	header.header {
		display: none;
	}
	nav {
		top: 0;
	}
	.sidebar-pane {
		inset-block-start: 0;
	}
	.right-sidebar-container {
		display: none;
	}
	footer {
		display: none;
	}
	
	.view-modes-zen-mode-template-doc main .sl-container {
		margin: 0 auto;
	}
	.view-modes-zen-mode-template-doc .main-frame {
		padding-inline: 0;
	}
	@media (min-width: 50rem) {
		.view-modes-zen-mode-template-doc main {
			width: calc(100vw - var(--sl-sidebar-width) - var(--sl-sidebar-pad-x));
			margin-left: var(--sl-sidebar-width);
		}
	}
	</style>
