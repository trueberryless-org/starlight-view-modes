---
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro'

import { getCollection } from 'astro:content';
export async function getStaticPaths() {
  const allDocs = await getCollection('docs');
  return allDocs.map((doc) => ({
    params: { path: doc.slug },
    props: { doc },
  }));
}

export const prerender = true

const { doc } = Astro.props;
const { Content, headings, remarkPluginFrontmatter } = await doc.render();

const { hasSidebar } = remarkPluginFrontmatter
---

<StarlightPage frontmatter={ remarkPluginFrontmatter } headings={headings} {hasSidebar} >
    <Content />
</StarlightPage>

<style is:global>
body {
  --sl-mobile-toc-height: 0rem;
}
.right-sidebar-container {
  display: none;
}
footer {
  display: none;
}

.view-modes-zen-mode-template-doc header.header > div {
  --sl-nav-gap: 1rem;
  grid-template-columns: minmax(calc(var(--__sidebar-width) + max(0rem, (100vw - var(--sl-sidebar-width) - var(--sl-content-width) - var(--sl-nav-gap)) / 2 - var(--sl-nav-gap))), auto) 1fr auto;
}
.view-modes-zen-mode-template-doc main .sl-container {
  margin: 0 auto;
}
.view-modes-zen-mode-template-doc .main-frame {
  padding-inline: 0;
}
@media (min-width: 50rem) {
  .view-modes-zen-mode-template-doc main {
    width: calc(100vw - var(--sl-sidebar-width) - var(--sl-sidebar-pad-x));
    margin-left: var(--sl-sidebar-width);
  }
}
</style>

<script define:vars={{ hasSidebar }}>
  if (hasSidebar) {
    document.body.classList.add("view-modes-zen-mode-template-doc");
  } else {
    document.body.classList.add("view-modes-zen-mode-template-splash");
  }
</script>